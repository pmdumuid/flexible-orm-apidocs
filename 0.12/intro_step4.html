<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>flexible-orm: Access Your Data!</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">flexible-orm
   &#160;<span id="projectnumber">0.12-beta</span>
   </div>
   <div id="projectbrief">Simple, flexible ORM framework with Amazon AWS SimpleDB libraries</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('intro_step4.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Access Your Data! </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>Page Index:</p>
<ul>
<li><a class="el" href="intro_step4.html#intro_step4_find">Finding &amp; Manipulating A Single Object</a><ul>
<li><a class="el" href="intro_step4.html#intro_step4_find_one">Find()</a></li>
<li><a class="el" href="intro_step4.html#intro_step4_find_save">Save()</a></li>
<li><a class="el" href="intro_step4.html#intro_step4_find_delete">Delete()</a></li>
</ul>
</li>
<li><a class="el" href="intro_step4.html#intro_step4_findall">Finding &amp; Manipulating Many Objects</a><ul>
<li><a class="el" href="intro_step4.html#intro_step4_find_all">FindAll()</a></li>
<li><a class="el" href="intro_step4.html#intro_step4_find_allby">FindAllBy()</a></li>
<li><a class="el" href="intro_step4.html#intro_step4_find_all_save">save()</a></li>
</ul>
</li>
<li><a class="el" href="intro_step4.html#intro_step4_moreinfo">For More Information</a></li>
</ul>
<p><br/>
<br/>
</p>
<h2><a class="anchor" id="intro_step4_find"></a>
Finding &amp; Manipulating A Single Object</h2>
<p>There are a number of ways to find a single object from the database. You can search by id (<a class="el" href="class_o_r_m_1_1_o_r_m___model.html#ae8a5fcda85309a91a5c9278d1c38a505" title="Find a single object.">ORM_Model::Find()</a>), a simple comparison (<a class="el" href="class_o_r_m_1_1_o_r_m___model.html#aa639cd55bf6eb80947fe0092180c7e21" title="Find the first object where field equals value.">ORM_Model::FindBy()</a>) or a more complex query (using <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#ae8a5fcda85309a91a5c9278d1c38a505" title="Find a single object.">ORM_Model::Find()</a> with an options array).</p>
<p><br/>
<br/>
 </p>
<h3><a class="anchor" id="intro_step4_options"></a>
Options Array</h3>
<ul>
<li><em>where</em><br/>
 A string for the <code>WHERE</code> statement, optionally with PDO placeholders. If placeholders are present, the <em>values</em> array must also exist.</li>
</ul>
<ul>
<li><em>values</em><br/>
 Array of values to be passed to PDOStatement-&gt;execute(). If "?" placeholders have been used, this is simply an array of those paramenters in order. If the named placeholders have been used (e.g. :colour), then the array should be an associative array where the keys are the placeholders.</li>
</ul>
<ul>
<li><em>order</em><br/>
 The SQL <code>ORDER</code> <code>BY</code> value.</li>
</ul>
<ul>
<li><em>limit</em><br/>
 (Only for findAll statements). Limit the number of results to the specified maximum.</li>
</ul>
<ul>
<li><em>offset</em><br/>
 (Only for findAll statements). Offset rows to skip (used with <em>limit</em> to create pagination.</li>
</ul>
<p><br/>
<br/>
 </p>
<h3><a class="anchor" id="intro_step4_find_one"></a>
Find</h3>
<p>May be used two ways: as a simple lookup by primary key, or as a more complex lookup using an array of options.</p>
<p><br/>
<br/>
 <b>Usage: Primary key lookup</b> </p>
<div class="fragment"><pre class="fragment"> <span class="comment">// Find car with id=2</span>
 @car = <a class="code" href="class_o_r_m_1_1_o_r_m___model.html#ae8a5fcda85309a91a5c9278d1c38a505" title="Find a single object.">Car::Find</a>( 2 );
</pre></div><p><b>Usage: Array of options</b> </p>
<div class="fragment"><pre class="fragment"> $minDoors = 3;
 $brand    = <span class="stringliteral">&#39;Alfa Romeo&#39;</span>;

 <span class="comment">// Find the first car that is not an Alfa Romeo where doors is greater than 3</span>
 <a class="code" href="orm__model_8check__validation_8php.html#a789046ce0dc6a03eb1e6e037ca8dc4b8">$car</a>      = <a class="code" href="class_o_r_m_1_1_o_r_m___model.html#ae8a5fcda85309a91a5c9278d1c38a505" title="Find a single object.">Car::Find</a>(array(
      <span class="stringliteral">&#39;where&#39;</span> =&gt; <span class="stringliteral">&#39;doors &gt; ? AND brand NOT LIKE ?&#39;</span>,
      <span class="stringliteral">&#39;order&#39;</span> =&gt; <span class="stringliteral">&#39;colour DESC&#39;</span>,
      <span class="stringliteral">&#39;values&#39;</span> =&gt; array( $minDoors, $brand ),
 ));
</pre></div><p>For more information about the options array, see <a class="el" href="intro_step4.html#intro_step4_options">Options Array</a> in the <a class="el" href="index.html#getting_started">Getting Started</a> tutorial.</p>
<p><br/>
<br/>
 <b>Foreign Keys</b></p>
<p>It is possible to fetch an object with related object(s) in a single query. This only works for the model that has the foreign key in it. For more information, on configuring foreign keys, see <a class="el" href="intro_step3.html">Define Foreign Keys</a>.</p>
<div class="fragment"><pre class="fragment"> <span class="comment">// Fetch the car with id 1 and include the Owner object</span>
 @car = <a class="code" href="class_o_r_m_1_1_o_r_m___model.html#ae8a5fcda85309a91a5c9278d1c38a505" title="Find a single object.">Car::Find</a>( 1, <span class="stringliteral">&#39;Owner&#39;</span> );
 echo <span class="stringliteral">&quot;This car is owned by &quot;</span>, <a class="code" href="orm__model_8check__validation_8php.html#a789046ce0dc6a03eb1e6e037ca8dc4b8">$car</a>-&gt;Owner-&gt;name;
</pre></div><p><br/>
<br/>
 <b>Other</b><br/>
 There is a hook for all <em>get</em> methods named <code><a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a8a53abd3db84cd7346697ac1335675d8" title="Override this method to perform an action after an object is retrieved from the database (Find()...">afterGet()</a></code>, to allow actions to be performed when an object is fetched (as opposed to the constructor, which is called both when a new object is created or fetched).</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a00d14ca7ece1c97a7de5a98ee364d2ba" title="Find a single object using the supplied options array.">FindByOptions()</a>, <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a1916b67de952b5acdf6d90bc3fde003c" title="Find all matching objects.">FindAll()</a> </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">mixed</td><td class="paramname">$idOrArray</td><td>Either an array of search options or a primary key value. If nothing is supplied, the first database entry is returned </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;array</td><td class="paramname">$findWith</td><td>[optional] A string or array of strings defining the related model names to also fetch (see <a class="el" href="intro_step3.html">Define Foreign Keys</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="class_o_r_m_1_1_o_r_m___model.html" title="Base class for ordinary ORM classes.">ORM_Model</a> </dd></dl>
 <br/>
<br/>
</p>
<h3><a class="anchor" id="intro_step4_find_save"></a>
Save</h3>
<dl class="return"><dt><b>Returns:</b></dt><dd>mixed </dd></dl>
 <br/>
<br/>
</p>
<h3><a class="anchor" id="intro_step4_find_delete"></a>
Delete</h3>
<p>The object will remain populated. Calls <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a9439df4bc17e08751f6571b30397c340" title="A pre-delete hook.">beforeDelete()</a> before the object is removed.</p>
<div class="fragment"><pre class="fragment"></pre></div> <h2><a class="anchor" id="intro_step4_findall"></a>
Finding &amp; Manipulating Many Objects</h2>
<p>The same options exist for finding a number of objects as for finding a single one. All the find function names are named starting with <em>FindAll</em>.</p>
<div class="fragment"><pre class="fragment"> <span class="comment">// Increment the age off all cars by 1</span>
 <a class="code" href="orm__model_8find_all_by_8example_8php.html#a7b59ba4913a44ed59c6498d7da374dd9">$cars</a> = <a class="code" href="class_o_r_m_1_1_o_r_m___model.html#a1916b67de952b5acdf6d90bc3fde003c" title="Find all matching objects.">Car::FindAll</a>();
 <a class="code" href="orm__model_8find_all_by_8example_8php.html#a7b59ba4913a44ed59c6498d7da374dd9">$cars</a>-&gt;each(<span class="keyword">function</span>(<a class="code" href="orm__model_8check__validation_8php.html#a789046ce0dc6a03eb1e6e037ca8dc4b8">$car</a>){
      <a class="code" href="orm__model_8check__validation_8php.html#a789046ce0dc6a03eb1e6e037ca8dc4b8">$car</a>-&gt;age++;
 });

 <a class="code" href="orm__model_8find_all_by_8example_8php.html#a7b59ba4913a44ed59c6498d7da374dd9">$cars</a>-&gt;save();
</pre></div><p> <br/>
<br/>
 </p>
<h3><a class="anchor" id="intro_step4_find_all"></a>
FindAll()</h3>
<p>Same syntax as <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#ae8a5fcda85309a91a5c9278d1c38a505" title="Find a single object.">Find()</a> except will return a <a class="el" href="class_o_r_m_1_1_model_collection.html" title="The ModelCollection class is used as a container for multiple ORM_Interface classes.">ModelCollection</a> of all matched items, rather than just the first matching object.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>There is a hook for all <em>get</em> methods named <code><a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a8a53abd3db84cd7346697ac1335675d8" title="Override this method to perform an action after an object is retrieved from the database (Find()...">afterGet()</a></code>, to allow actions to be performed when an object is fetched (as opposed to the constructor, which is called both when a new object is created or fetched).</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_o_r_m_1_1_o_r_m___model.html#ae8a5fcda85309a91a5c9278d1c38a505" title="Find a single object.">Find()</a>, <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a71b7619b377afce22e3cd9d5712d8488" title="Find all objects where a single field meets the requirements.">FindAllBy()</a> </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">array</td><td class="paramname">$optionsArray</td><td>[optional] An array of options for finding objects. If not supplied, this will return all objects of this type stored in the database. For more information about the options array, see <a class="el" href="intro_step4.html#intro_step4_options">Options Array</a> in the <a class="el" href="index.html#getting_started">Getting Started</a> tutorial </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;array</td><td class="paramname">$findWith</td><td>[optional] A string or array of strings defining the related model names to also fetch (see <a class="el" href="intro_step3.html">Define Foreign Keys</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="class_o_r_m_1_1_model_collection.html" title="The ModelCollection class is used as a container for multiple ORM_Interface classes.">ModelCollection</a> A collection of <a class="el" href="class_o_r_m_1_1_o_r_m___model.html" title="Base class for ordinary ORM classes.">ORM_Model</a> subclasses </dd></dl>
 <br/>
<br/>
</p>
<h3><a class="anchor" id="intro_step4_find_allby"></a>
FindAllBy()</h3>
<p>This would not be called directly ordinarily, instead call the "magic" method as shown below.</p>
<p><b>Usage</b>: </p>
<div class="fragment"><pre class="fragment"></pre></div><dl class="note"><dt><b>Note:</b></dt><dd>There is a hook for all <em>get</em> methods named <code><a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a8a53abd3db84cd7346697ac1335675d8" title="Override this method to perform an action after an object is retrieved from the database (Find()...">afterGet()</a></code>, to allow actions to be performed when an object is fetched (as opposed to the constructor, which is called both when a new object is created or fetched).</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd><p class="startdd">if operator is IN then allow $value to be an array </p>
<p class="enddd">verify operator type</p>
</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramtype">string</td><td class="paramname">$field</td><td>The field name to search on </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$value</td><td>The value to compare for finding objects </td></tr>
    <tr><td class="paramtype">string</td><td class="paramname">$operator</td><td>[optional] A valid SQL comparison operator (Default =) </td></tr>
    <tr><td class="paramtype">string&#160;|&#160;array</td><td class="paramname">$findWith</td><td>[optional] A string or array of strings defining the related model names to also fetch (see <a class="el" href="intro_step3.html">Define Foreign Keys</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="class_o_r_m_1_1_model_collection.html" title="The ModelCollection class is used as a container for multiple ORM_Interface classes.">ModelCollection</a> Return the <a class="el" href="class_o_r_m_1_1_model_collection.html" title="The ModelCollection class is used as a container for multiple ORM_Interface classes.">ModelCollection</a> of objects </dd></dl>
 <br/>
<br/>
</p>
<h3><a class="anchor" id="intro_step4_find_all_save"></a>
save()</h3>
<p>Returns an array of ids matching the objects.</p>
<p><b>Usage</b> </p>
<div class="fragment"><pre class="fragment"> $people = Person::FindAll();

 $people[1]-&gt;name = <span class="stringliteral">&#39;changed&#39;</span>;
 $people[]        = <span class="keyword">new</span> Person( array(<span class="stringliteral">&#39;name&#39;</span> =&gt; <span class="stringliteral">&#39;new person&#39;</span> ) );
 $ids             = $people-&gt;save();
</pre></div><dl class="return"><dt><b>Returns:</b></dt><dd>array Of row ids. This may be especially useful when using autoincrement style keys that are generated by the database </dd></dl>
 <br/>
<br/>
</p>
<h2><a class="anchor" id="intro_step4_moreinfo"></a>
For More Information</h2>
<dl class="see"><dt><b>See also:</b></dt><dd>Single objects: <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#ae8a5fcda85309a91a5c9278d1c38a505" title="Find a single object.">ORM_Model::Find()</a>, <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#aa639cd55bf6eb80947fe0092180c7e21" title="Find the first object where field equals value.">ORM_Model::FindBy()</a>, <a class="el" href="interface_o_r_m_1_1_interfaces_1_1_o_r_m_interface.html#afc8a3c62679cf00ade9f15fb2a6d6132" title="Save the changes to (or create) this object.">ORM_Model::save()</a> <br/>
 Multiple objects: <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a1916b67de952b5acdf6d90bc3fde003c" title="Find all matching objects.">ORM_Model::FindAll()</a>, <a class="el" href="class_o_r_m_1_1_o_r_m___model.html#a71b7619b377afce22e3cd9d5712d8488" title="Find all objects where a single field meets the requirements.">ORM_Model::FindAllBy()</a>, <a class="el" href="class_o_r_m_1_1_model_collection.html" title="The ModelCollection class is used as a container for multiple ORM_Interface classes.">ModelCollection</a></dd></dl>
<h2><a class="anchor" id="intro_step4_nav"></a>
Getting Started</h2>
<ul>
<li><b>Step 1: <a class="el" href="intro_step1.html">Define Data Structures</a></b></li>
<li><b>Step 2: <a class="el" href="intro_step2.html">Define Model Classes</a></b></li>
<li><b>Step 3: <a class="el" href="intro_step3.html">Define Foreign Keys</a></b></li>
<li><b>Step 4: Access your data!</b> </li>
</ul>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="index.html">Introduction to flexible-orm</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">Generated on Tue Nov 29 2011 17:53:33 for flexible-orm by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.5.1 </li>
   </ul>
 </div>


</body>
</html>
